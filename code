#include "mbed.h"

// Define the 7-segment display pins for a common-anode setup
DigitalOut A(D2);
DigitalOut B(D3);
DigitalOut C(D4);
DigitalOut D(D5);
DigitalOut E(D6);
DigitalOut F(D7);
DigitalOut G(D8);

// Function to display a digit on the 7-segment display
// 0 = Segment ON, 1 = Segment OFF
void Display(int disp) {
    switch(disp) {
        // Numbers 0-9
        case 0 : A=0; B=0; C=0; D=0; E=0; F=0; G=1; break; // 0
        case 1 : A=1; B=0; C=0; D=1; E=1; F=1; G=1; break; // 1
        case 2 : A=0; B=0; C=1; D=0; E=0; F=1; G=0; break; // 2
        case 3 : A=0; B=0; C=0; D=0; E=1; F=1; G=0; break; // 3
        case 4 : A=1; B=0; C=0; D=1; E=1; F=0; G=0; break; // 4
        case 5 : A=0; B=1; C=0; D=0; E=1; F=0; G=0; break; // 5
        case 6 : A=0; B=1; C=0; D=0; E=0; F=0; G=0; break; // 6
        case 7 : A=0; B=0; C=0; D=1; E=1; F=1; G=1; break; // 7
        case 8 : A=0; B=0; C=0; D=0; E=0; F=0; G=0; break; // 8
        case 9 : A=0; B=0; C=0; D=0; E=1; F=0; G=0; break; // 9
        
        // Hexadecimal Letters A-F
        case 10: A=0; B=0; C=0; D=1; E=0; F=0; G=0; break; // A
        case 11: A=1; B=1; C=0; D=0; E=0; F=0; G=0; break; // b
        case 12: A=0; B=1; C=1; D=0; E=0; F=0; G=1; break; // C
        case 13: A=1; B=0; C=0; D=0; E=0; F=1; G=0; break; // d
        case 14: A=0; B=1; C=1; D=0; E=0; F=0; G=0; break; // E
        case 15: A=0; B=1; C=1; D=1; E=0; F=0; G=0; break; // F
    }
}

int main() {
    while(1) {
        // Loop through the full hexadecimal range (0 to 15)
        for(int i = 0; i <= 15; i++) {
            Display(i);
            // Wait for half a second before showing the next value
            ThisThread::sleep_for(1500ms);
        }
    }
}
